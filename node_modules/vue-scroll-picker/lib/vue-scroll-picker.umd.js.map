{"version":3,"file":"vue-scroll-picker.umd.js","sources":["../src/components/picker.ts","../src/index.ts"],"sourcesContent":["import { defineComponent, PropType, h, renderSlot, VNode } from 'vue'\n\n\nfunction debounce<TFunc extends Function>(handle: TFunc, delay = 83): TFunc { // eslint-disable-line @typescript-eslint/ban-types\n  let timeout = null as any\n  return function (this: any) {\n    if (timeout) {\n      clearTimeout(timeout)\n      timeout = null\n    }\n    const self = this // eslint-disable-line no-invalid-this,@typescript-eslint/no-this-alias\n    const args = arguments // eslint-disable-line prefer-rest-params\n    timeout = setTimeout(() => handle.apply(self, args), delay)\n  } as any as TFunc\n}\n\nfunction getBoundingClientCenterY(elem: HTMLElement) {\n  const { top, bottom } = elem.getBoundingClientRect()\n  return (top + bottom) / 2\n}\n\nfunction normalizeOptions(options: ScrollPickerOptionable[]): ScrollPickerOption[] {\n  return options.map((option) => {\n    switch (typeof option) {\n      case 'string': {\n        return { value: option, name: option }\n      }\n      case 'number':\n      case 'boolean': {\n        return { value: option, name: `${option}` }\n      }\n    }\n    return option\n  })\n}\n\nfunction isTouchEvent(event: any): event is TouchEvent {\n  return event.changedTouches || event.touches\n}\n\nfunction getEventXY(event: TouchEvent | MouseEvent): { clientX: number, clientY: number } {\n  if (isTouchEvent(event)) {\n    return event.changedTouches[0] || event.touches[0]\n  }\n  return event\n}\n\ntype MouseWheelEvent = MouseEvent & { deltaY: number }\n\nexport interface ScrollPickerOption {\n  name: string\n  value: any\n}\n\nexport type ScrollPickerOptionable = string | number | boolean | ScrollPickerOption\n\nexport default defineComponent({\n  props: {\n    modelValue: null,\n    options: {\n      type: Array as PropType<ScrollPickerOptionable[]>,\n      default: () => [],\n    },\n    dragSensitivity: {\n      type: Number,\n      default: 1.7,\n    },\n    touchSensitivity: {\n      type: Number,\n      default: 1.7,\n    },\n    scrollSensitivity: {\n      type: Number,\n      default: 1,\n    },\n    empty: {\n      type: String,\n      default: 'No Items',\n    },\n    placeholder: {\n      type: String,\n      default: null,\n    },\n  },\n  data() {\n    const internalOptions = normalizeOptions(this.options)\n\n    let internalIndex = internalOptions.findIndex(option => option.value == this.modelValue)\n    if (internalIndex === -1 && !this.placeholder && !this.$slots.placeholder && this.options.length > 0) {\n      internalIndex = 0\n    }\n    const internalValue = internalOptions[internalIndex]?.value ?? null\n\n    return {\n      refItems: [] as HTMLDivElement[],\n\n      internalOptions,\n      internalIndex,\n      internalValue,\n\n      pivots: [] as number[],\n      pivotsMin: 0,\n      pivotsMax: 0,\n\n      scroll: null as number | null,\n      scrollOffsetTop: 0,\n      scrollMin: 0,\n      scrollMax: 0,\n\n      transitioning: false,\n      transitionTimer: null as any | null,\n\n      start: null as [scroll: number, clientY: number] | null,\n\n      isMouseDown: false,\n      isDragging: false,\n    }\n  },\n  computed: {\n    hasPlaceholder(): boolean {\n      return !!(this.placeholder || this.$slots.placeholder)\n    },\n  },\n  watch: {\n    modelValue(value: any) {\n      if ((value === null || value === undefined) && this.hasPlaceholder) {\n        this.correction(-1)\n        return\n      }\n\n      const nextInternalIndex = this.internalOptions.findIndex((option) => option.value == value)\n      if (nextInternalIndex === -1) {\n        this.$emit('update:modelValue', this.internalValue)\n        return\n      }\n\n      if (this.internalIndex !== nextInternalIndex) {\n        this.correction(nextInternalIndex)\n      }\n    },\n    options: {\n      handler(options: ScrollPickerOptionable[]) {\n        const internalOptions = this.internalOptions = normalizeOptions(options)\n\n        let internalIndex = internalOptions.findIndex(option => option.value == this.modelValue)\n        if (internalIndex === -1 && !this.hasPlaceholder && this.options.length > 0) {\n          internalIndex = 0\n        }\n        const internalValue = internalOptions[internalIndex]?.value ?? null\n\n        this.$nextTick(() => {\n          this.calculatePivots()\n          this.scroll = this.findScrollByIndex(internalIndex)\n          this.internalIndex = internalIndex\n          if (this.internalValue !== internalValue) {\n            this.$emit('update:modelValue', this.internalValue = internalValue)\n          }\n        })\n      },\n      deep: true,\n    },\n  },\n  beforeUpdate() {\n    this.refItems = []\n  },\n  mounted() {\n    this.calculatePivots()\n    this.scroll = this.findScrollByIndex(this.internalIndex)\n    if (this.internalValue !== this.modelValue) {\n      this.$emit('update:modelValue', this.internalValue)\n    }\n\n    const $el = this.$el as HTMLDivElement\n\n    $el.addEventListener('touchstart', this.onStart)\n    $el.addEventListener('touchmove', this.onMove)\n    $el.addEventListener('touchend', this.onEnd)\n    $el.addEventListener('touchcancel', this.onCancel)\n\n    if ('onwheel' in $el) {\n      $el.addEventListener('wheel', this.onWheel)\n    } else if ('onmousewheel' in $el) {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Element/mousewheel_event\n      $el.addEventListener('mousewheel', this.onWheel as any)\n    } else if ('onDOMMouseScroll' in $el) {\n      // https://developer.mozilla.org/en-US/docs/Web/API/Element/DOMMouseScroll_event\n      $el.addEventListener('DOMMouseScroll', this.onWheel as any)\n    }\n    $el.addEventListener('mousedown', this.onStart)\n    document.addEventListener('mousemove', this.onMove)\n    document.addEventListener('mouseup', this.onEnd)\n    document.addEventListener('mouseout', this.onDocumentMouseOut)\n  },\n  beforeUnmount() {\n    const $el = this.$el as HTMLDivElement\n\n    $el.removeEventListener('touchstart', this.onStart)\n    $el.removeEventListener('touchmove', this.onMove)\n    $el.removeEventListener('touchend', this.onEnd)\n    $el.removeEventListener('touchcancel', this.onCancel)\n\n    if ('onwheel' in $el) {\n      $el.removeEventListener('wheel', this.onWheel)\n    } else if ('onmousewheel' in $el) {\n      $el.removeEventListener('mousewheel', this.onWheel as any)\n    } else if ('onDOMMouseScroll' in $el) {\n      $el.removeEventListener('DOMMouseScroll', this.onWheel as any)\n    }\n    $el.removeEventListener('mousedown', this.onStart)\n    document.removeEventListener('mousemove', this.onMove)\n    document.removeEventListener('mouseup', this.onEnd)\n    document.removeEventListener('mouseout', this.onDocumentMouseOut)\n  },\n  methods: {\n    setRefItem(el: HTMLDivElement) {\n      this.refItems.push(el)\n    },\n    resize() {\n      this.$nextTick(() => {\n        this.calculatePivots()\n        this.scroll = this.findScrollByIndex(this.internalIndex)\n      })\n    },\n    calculatePivots() {\n      const $rotator = this.$refs.rotator as HTMLDivElement\n      const $layerSelection = this.$refs.layerSelection as HTMLDivElement\n\n      const rotatorTop = $rotator.getBoundingClientRect().top\n      const pivots = this.pivots = this.refItems.map((item) => getBoundingClientCenterY(item) - rotatorTop).sort((a, b) => a - b)\n      const pivotsMin = this.pivotsMin = Math.min(...pivots)\n      const pivotsMax = this.pivotsMax = Math.max(...pivots)\n\n      const scrollOffsetTop = this.scrollOffsetTop = $layerSelection.offsetTop + $layerSelection.offsetHeight / 2\n\n      this.scrollMin = scrollOffsetTop - pivotsMin\n      this.scrollMax = scrollOffsetTop - pivotsMax\n    },\n    sanitizeInternalIndex(index: number): number {\n      return Math.min(Math.max(index, this.hasPlaceholder ? -1 : 0), this.internalOptions.length - 1)\n    },\n    findIndexFromScroll(scroll: number): number {\n      let prevDiff = null as number | null\n      let pivotIndex = 0\n      this.pivots.forEach((pivot, i) => {\n        const diff = pivot + scroll - this.scrollOffsetTop\n        if (prevDiff === null || Math.abs(prevDiff) > Math.abs(diff)) {\n          pivotIndex = i\n          prevDiff = diff\n        }\n      })\n      if (this.hasPlaceholder || this.options.length === 0) {\n        return pivotIndex - 1\n      }\n      return pivotIndex\n    },\n    findScrollByIndex(index: number): number {\n      let pivotIndex = index\n      if (this.hasPlaceholder || this.options.length === 0) {\n        pivotIndex++\n      }\n      if (index > -1 && pivotIndex in this.pivots) {\n        return this.scrollOffsetTop - this.pivots[pivotIndex]\n      }\n      if (index >= this.pivots.length) {\n        return this.scrollOffsetTop - this.pivotsMax\n      }\n      return this.scrollOffsetTop - this.pivotsMin\n\n    },\n    onWheel(event: MouseWheelEvent) {\n      if (this.scroll! >= this.scrollMin && event.deltaY < 0) { return }\n      if (this.scroll! <= this.scrollMax && event.deltaY > 0) { return }\n      if (this.pivots.length === 1) { return }\n\n      event.preventDefault()\n\n      const nextDirInternalIndex = this.sanitizeInternalIndex(this.internalIndex + (event.deltaY > 0 ? 1 : -1))\n      const deltaMax = event.deltaY > 0\n        ? this.findScrollByIndex(nextDirInternalIndex - 1) - this.findScrollByIndex(nextDirInternalIndex)\n        : this.findScrollByIndex(nextDirInternalIndex) - this.findScrollByIndex(nextDirInternalIndex + 1)\n\n      const deltaY = Math.max(Math.min(event.deltaY, deltaMax), deltaMax * -1)\n\n      this.scroll = Math.min(Math.max(this.scroll! - deltaY * this.scrollSensitivity, this.scrollMax), this.scrollMin)\n\n      const nextInternalIndex = this.sanitizeInternalIndex(this.findIndexFromScroll(this.scroll))\n      const nextInternalValue = this.internalOptions[nextInternalIndex]?.value ?? null\n\n      this.internalIndex = nextInternalIndex\n      if (this.internalValue !== nextInternalValue) {\n        this.$emit('update:modelValue', this.internalValue = nextInternalValue)\n      }\n\n      this.onAfterWheel(() => {\n        this.correction(this.findIndexFromScroll(this.scroll!))\n      })\n    },\n    onAfterWheel: debounce((handler: () => void) => {\n      handler()\n    }, 200),\n    onStart(event: TouchEvent | MouseEvent) {\n      if (event.cancelable) {\n        event.preventDefault()\n      }\n\n      const { clientY } = getEventXY(event)\n      this.start = [this.scroll!, clientY]\n      if (!isTouchEvent(event)) {\n        this.isMouseDown = true\n      }\n      this.isDragging = false\n    },\n    onMove(event: TouchEvent | MouseEvent) {\n      if (event.cancelable) {\n        event.preventDefault()\n      }\n      if (!this.start) {\n        return\n      }\n      const { clientY } = getEventXY(event)\n      const diff = clientY - this.start[1]\n      if (Math.abs(diff) > 1.5) {\n        this.isDragging = true\n      }\n      this.scroll = this.start[0] + diff * (isTouchEvent(event) ? this.touchSensitivity : this.dragSensitivity)\n    },\n    onEnd(event: TouchEvent | MouseEvent) {\n      if (event.cancelable) {\n        event.preventDefault()\n      }\n      if (this.isDragging) {\n        this.correction(this.findIndexFromScroll(this.scroll!))\n      } else if (this.isMouseDown) {\n        this.onClick(event)\n      }\n      this.start = null\n      this.isDragging = false\n      this.isMouseDown = false\n    },\n    onDocumentMouseOut(event: MouseEvent) {\n      if (event.relatedTarget === null || (event.relatedTarget as Element)?.nodeName === 'HTML') {\n        this.onCancel(event)\n      }\n    },\n    onCancel(event: TouchEvent | MouseEvent) {\n      if (event.cancelable) {\n        event.preventDefault()\n      }\n      this.correction(this.internalIndex) // cancel (rollback)\n      this.start = null\n      this.isMouseDown = false\n      this.isDragging = false\n    },\n    onClick(event: TouchEvent | MouseEvent) {\n      const $layerTop = this.$refs.layerTop as HTMLDivElement\n      const $layerBottom = this.$refs.layerBottom as HTMLDivElement\n      const touchInfo = getEventXY(event)\n      const x = touchInfo.clientX\n      const y = touchInfo.clientY\n      const topRect = $layerTop.getBoundingClientRect()\n      const bottomRect = $layerBottom.getBoundingClientRect()\n\n      if (topRect.left <= x && x <= topRect.right && topRect.top <= y && y <= topRect.bottom) {\n        this.correction(this.internalIndex - 1)\n      } else if (bottomRect.left <= x && x <= bottomRect.right && bottomRect.top <= y && y <= bottomRect.bottom) {\n        this.correction(this.internalIndex + 1)\n      }\n    },\n    correction(index: number) {\n      const nextInternalIndex = this.sanitizeInternalIndex(index)\n      const nextInternalValue = this.internalOptions[nextInternalIndex]?.value ?? null\n      this.scroll = this.findScrollByIndex(nextInternalIndex)\n\n      this.transitioning = true\n      if (this.transitionTimer) {\n        clearTimeout(this.transitionTimer)\n        this.transitionTimer = null\n      }\n\n      this.transitionTimer = setTimeout(() => {\n        this.transitioning = false\n        this.transitionTimer = null\n\n        this.internalIndex = nextInternalIndex\n        if (this.internalValue !== nextInternalValue) {\n          this.$emit('update:modelValue', this.internalValue = nextInternalValue)\n        }\n      }, 100)\n    },\n  },\n  render() {\n    let nodes = [] as VNode[]\n    if (this.hasPlaceholder) {\n      nodes.push(h('div', {\n        class: [\n          'vue-scroll-picker-item',\n          'vue-scroll-picker-item-placeholder',\n          {\n            'vue-scroll-picker-item-selected': this.internalIndex === -1,\n          },\n        ],\n        ref: (el) => el && this.setRefItem(el as HTMLDivElement),\n      }, renderSlot(this.$slots, 'placeholder', { text: this.placeholder }, () => [\n        this.placeholder,\n      ])))\n    } else if (this.internalOptions.length === 0) {\n      nodes.push(h('div', {\n        class: [\n          'vue-scroll-picker-item',\n          'vue-scroll-picker-item-empty',\n          'vue-scroll-picker-item-selected',\n        ],\n        ref: (el) => el && this.setRefItem(el as HTMLDivElement),\n      }, renderSlot(this.$slots, 'empty', { text: this.empty }, () => [\n        this.empty,\n      ])))\n    }\n\n    nodes = nodes.concat(this.internalOptions.map((option, index) => {\n      return h('div', {\n        class: [\n          'vue-scroll-picker-item',\n          {\n            'vue-scroll-picker-item-selected': this.internalIndex === index,\n          },\n        ],\n        key: option.value,\n        ref: (el) => el && this.setRefItem(el as HTMLDivElement),\n      }, renderSlot(this.$slots, 'default', { option }, () => [\n        option.name,\n      ]))\n    }))\n    return h('div', {\n      class: [\n        'vue-scroll-picker',\n      ],\n    }, [\n      h('div', {\n        ref: 'rotator',\n        class: [\n          'vue-scroll-picker-rotator',\n          {\n            'vue-scroll-picker-rotator-transition': this.transitioning,\n          },\n        ],\n        style: typeof this.scroll === 'number' ? { top: `${this.scroll}px` } : {},\n      }, nodes),\n      h('div', { class: ['vue-scroll-picker-layer'] }, [\n        h('div', { class: ['vue-scroll-picker-layer-top'], ref: 'layerTop' }),\n        h('div', { class: ['vue-scroll-picker-layer-selection'], ref: 'layerSelection' }),\n        h('div', { class: ['vue-scroll-picker-layer-bottom'], ref: 'layerBottom' }),\n      ]),\n    ])\n  },\n})\n","import { App, Plugin } from 'vue'\n\nimport VueScrollPicker from './components/picker'\n\n\nexport function install(app: App) {\n  app.component('VueScrollPicker', VueScrollPicker)\n}\n\nif (typeof window !== 'undefined' && (window as any).Vue) {\n  install((window as any).Vue)\n}\n\nconst plugin: Plugin = {\n  install,\n}\n\nexport default plugin\n\n// re-define: https://github.com/vitejs/vite/issues/2117\nexport interface VueScrollPickerOption {\n  name: string\n  value: any\n}\n\nexport {\n  VueScrollPicker,\n}\n"],"names":["debounce","handle","delay","timeout","self","args","getBoundingClientCenterY","elem","top","bottom","normalizeOptions","options","option","isTouchEvent","event","getEventXY","VueScrollPicker","defineComponent","internalOptions","internalIndex","internalValue","_b","_a","value","nextInternalIndex","$el","el","$rotator","$layerSelection","rotatorTop","pivots","item","b","pivotsMin","pivotsMax","scrollOffsetTop","index","scroll","prevDiff","pivotIndex","pivot","i","diff","nextDirInternalIndex","deltaMax","deltaY","nextInternalValue","handler","clientY","$layerTop","$layerBottom","touchInfo","x","y","topRect","bottomRect","nodes","h","renderSlot","install","app","plugin"],"mappings":"+QAGA,SAASA,EAAiCC,EAAeC,EAAQ,GAAW,CAC1E,IAAIC,EAAU,KACd,OAAO,UAAqB,CACtBA,IACF,aAAaA,CAAO,EACVA,EAAA,MAEZ,MAAMC,EAAO,KACPC,EAAO,UACbF,EAAU,WAAW,IAAMF,EAAO,MAAMG,EAAMC,CAAI,EAAGH,CAAK,CAAA,CAE9D,CAEA,SAASI,EAAyBC,EAAmB,CACnD,KAAM,CAAE,IAAAC,EAAK,OAAAC,CAAO,EAAIF,EAAK,sBAAsB,EACnD,OAAQC,EAAMC,GAAU,CAC1B,CAEA,SAASC,EAAiBC,EAAyD,CAC1E,OAAAA,EAAQ,IAAKC,GAAW,CAC7B,OAAQ,OAAOA,EAAQ,CACrB,IAAK,SACH,MAAO,CAAE,MAAOA,EAAQ,KAAMA,CAAO,EAEvC,IAAK,SACL,IAAK,UACH,MAAO,CAAE,MAAOA,EAAQ,KAAM,GAAGA,IAErC,CACO,OAAAA,CAAA,CACR,CACH,CAEA,SAASC,EAAaC,EAAiC,CAC9C,OAAAA,EAAM,gBAAkBA,EAAM,OACvC,CAEA,SAASC,EAAWD,EAAsE,CACpF,OAAAD,EAAaC,CAAK,EACbA,EAAM,eAAe,IAAMA,EAAM,QAAQ,GAE3CA,CACT,CAWA,MAAAE,EAAeC,kBAAgB,CAC7B,MAAO,CACL,WAAY,KACZ,QAAS,CACP,KAAM,MACN,QAAS,IAAM,CAAC,CAClB,EACA,gBAAiB,CACf,KAAM,OACN,QAAS,GACX,EACA,iBAAkB,CAChB,KAAM,OACN,QAAS,GACX,EACA,kBAAmB,CACjB,KAAM,OACN,QAAS,CACX,EACA,MAAO,CACL,KAAM,OACN,QAAS,UACX,EACA,YAAa,CACX,KAAM,OACN,QAAS,IACX,CACF,EACA,MAAO,SACC,MAAAC,EAAkBR,EAAiB,KAAK,OAAO,EAErD,IAAIS,EAAgBD,EAAgB,aAAoBN,EAAO,OAAS,KAAK,UAAU,EACnFO,IAAkB,IAAM,CAAC,KAAK,aAAe,CAAC,KAAK,OAAO,aAAe,KAAK,QAAQ,OAAS,IACjFA,EAAA,GAEZ,MAAAC,GAAgBC,GAAAC,EAAAJ,EAAgBC,KAAhB,YAAAG,EAAgC,QAAhC,KAAAD,EAAyC,KAExD,MAAA,CACL,SAAU,CAAC,EAEX,gBAAAH,EACA,cAAAC,EACA,cAAAC,EAEA,OAAQ,CAAC,EACT,UAAW,EACX,UAAW,EAEX,OAAQ,KACR,gBAAiB,EACjB,UAAW,EACX,UAAW,EAEX,cAAe,GACf,gBAAiB,KAEjB,MAAO,KAEP,YAAa,GACb,WAAY,EAAA,CAEhB,EACA,SAAU,CACR,gBAA0B,CACxB,MAAO,CAAC,EAAE,KAAK,aAAe,KAAK,OAAO,YAC5C,CACF,EACA,MAAO,CACL,WAAWG,EAAY,CACrB,GAAKA,GAAU,MAAgC,KAAK,eAAgB,CAClE,KAAK,WAAW,EAAE,EAClB,MACF,CAEM,MAAAC,EAAoB,KAAK,gBAAgB,UAAWZ,GAAWA,EAAO,OAASW,CAAK,EAC1F,GAAIC,IAAsB,GAAI,CACvB,KAAA,MAAM,oBAAqB,KAAK,aAAa,EAClD,MACF,CAEI,KAAK,gBAAkBA,GACzB,KAAK,WAAWA,CAAiB,CAErC,EACA,QAAS,CACP,QAAQb,EAAmC,SACzC,MAAMO,EAAkB,KAAK,gBAAkBR,EAAiBC,CAAO,EAEvE,IAAIQ,EAAgBD,EAAgB,aAAoBN,EAAO,OAAS,KAAK,UAAU,EACnFO,IAAkB,IAAM,CAAC,KAAK,gBAAkB,KAAK,QAAQ,OAAS,IACxDA,EAAA,GAEZ,MAAAC,GAAgBC,GAAAC,EAAAJ,EAAgBC,KAAhB,YAAAG,EAAgC,QAAhC,KAAAD,EAAyC,KAE/D,KAAK,UAAU,IAAM,CACnB,KAAK,gBAAgB,EAChB,KAAA,OAAS,KAAK,kBAAkBF,CAAa,EAClD,KAAK,cAAgBA,EACjB,KAAK,gBAAkBC,GACzB,KAAK,MAAM,oBAAqB,KAAK,cAAgBA,CAAa,CACpE,CACD,CACH,EACA,KAAM,EACR,CACF,EACA,cAAe,CACb,KAAK,SAAW,EAClB,EACA,SAAU,CACR,KAAK,gBAAgB,EACrB,KAAK,OAAS,KAAK,kBAAkB,KAAK,aAAa,EACnD,KAAK,gBAAkB,KAAK,YACzB,KAAA,MAAM,oBAAqB,KAAK,aAAa,EAGpD,MAAMK,EAAM,KAAK,IAEbA,EAAA,iBAAiB,aAAc,KAAK,OAAO,EAC3CA,EAAA,iBAAiB,YAAa,KAAK,MAAM,EACzCA,EAAA,iBAAiB,WAAY,KAAK,KAAK,EACvCA,EAAA,iBAAiB,cAAe,KAAK,QAAQ,EAE7C,YAAaA,EACXA,EAAA,iBAAiB,QAAS,KAAK,OAAO,EACjC,iBAAkBA,EAEvBA,EAAA,iBAAiB,aAAc,KAAK,OAAc,EAC7C,qBAAsBA,GAE3BA,EAAA,iBAAiB,iBAAkB,KAAK,OAAc,EAExDA,EAAA,iBAAiB,YAAa,KAAK,OAAO,EACrC,SAAA,iBAAiB,YAAa,KAAK,MAAM,EACzC,SAAA,iBAAiB,UAAW,KAAK,KAAK,EACtC,SAAA,iBAAiB,WAAY,KAAK,kBAAkB,CAC/D,EACA,eAAgB,CACd,MAAMA,EAAM,KAAK,IAEbA,EAAA,oBAAoB,aAAc,KAAK,OAAO,EAC9CA,EAAA,oBAAoB,YAAa,KAAK,MAAM,EAC5CA,EAAA,oBAAoB,WAAY,KAAK,KAAK,EAC1CA,EAAA,oBAAoB,cAAe,KAAK,QAAQ,EAEhD,YAAaA,EACXA,EAAA,oBAAoB,QAAS,KAAK,OAAO,EACpC,iBAAkBA,EACvBA,EAAA,oBAAoB,aAAc,KAAK,OAAc,EAChD,qBAAsBA,GAC3BA,EAAA,oBAAoB,iBAAkB,KAAK,OAAc,EAE3DA,EAAA,oBAAoB,YAAa,KAAK,OAAO,EACxC,SAAA,oBAAoB,YAAa,KAAK,MAAM,EAC5C,SAAA,oBAAoB,UAAW,KAAK,KAAK,EACzC,SAAA,oBAAoB,WAAY,KAAK,kBAAkB,CAClE,EACA,QAAS,CACP,WAAWC,EAAoB,CACxB,KAAA,SAAS,KAAKA,CAAE,CACvB,EACA,QAAS,CACP,KAAK,UAAU,IAAM,CACnB,KAAK,gBAAgB,EACrB,KAAK,OAAS,KAAK,kBAAkB,KAAK,aAAa,CAAA,CACxD,CACH,EACA,iBAAkB,CACV,MAAAC,EAAW,KAAK,MAAM,QACtBC,EAAkB,KAAK,MAAM,eAE7BC,EAAaF,EAAS,sBAAA,EAAwB,IAC9CG,EAAS,KAAK,OAAS,KAAK,SAAS,IAAKC,GAASzB,EAAyByB,CAAI,EAAIF,CAAU,EAAE,KAAK,CAAC,EAAGG,IAAM,EAAIA,CAAC,EACpHC,EAAY,KAAK,UAAY,KAAK,IAAI,GAAGH,CAAM,EAC/CI,EAAY,KAAK,UAAY,KAAK,IAAI,GAAGJ,CAAM,EAE/CK,EAAkB,KAAK,gBAAkBP,EAAgB,UAAYA,EAAgB,aAAe,EAE1G,KAAK,UAAYO,EAAkBF,EACnC,KAAK,UAAYE,EAAkBD,CACrC,EACA,sBAAsBE,EAAuB,CAC3C,OAAO,KAAK,IAAI,KAAK,IAAIA,EAAO,KAAK,eAAiB,GAAK,CAAC,EAAG,KAAK,gBAAgB,OAAS,CAAC,CAChG,EACA,oBAAoBC,EAAwB,CAC1C,IAAIC,EAAW,KACXC,EAAa,EAQjB,OAPA,KAAK,OAAO,QAAQ,CAACC,EAAOC,IAAM,CAC1B,MAAAC,EAAOF,EAAQH,EAAS,KAAK,iBAC/BC,IAAa,MAAQ,KAAK,IAAIA,CAAQ,EAAI,KAAK,IAAII,CAAI,KAC5CH,EAAAE,EACFH,EAAAI,EACb,CACD,EACG,KAAK,gBAAkB,KAAK,QAAQ,SAAW,EAC1CH,EAAa,EAEfA,CACT,EACA,kBAAkBH,EAAuB,CACvC,IAAIG,EAAaH,EAIjB,OAHI,KAAK,gBAAkB,KAAK,QAAQ,SAAW,IACjDG,IAEEH,EAAQ,IAAMG,KAAc,KAAK,OAC5B,KAAK,gBAAkB,KAAK,OAAOA,GAExCH,GAAS,KAAK,OAAO,OAChB,KAAK,gBAAkB,KAAK,UAE9B,KAAK,gBAAkB,KAAK,SAErC,EACA,QAAQtB,EAAwB,SAG1B,GAFA,KAAK,QAAW,KAAK,WAAaA,EAAM,OAAS,GACjD,KAAK,QAAW,KAAK,WAAaA,EAAM,OAAS,GACjD,KAAK,OAAO,SAAW,EAAK,OAEhCA,EAAM,eAAe,EAEf,MAAA6B,EAAuB,KAAK,sBAAsB,KAAK,eAAiB7B,EAAM,OAAS,EAAI,EAAI,GAAG,EAClG8B,EAAW9B,EAAM,OAAS,EAC5B,KAAK,kBAAkB6B,EAAuB,CAAC,EAAI,KAAK,kBAAkBA,CAAoB,EAC9F,KAAK,kBAAkBA,CAAoB,EAAI,KAAK,kBAAkBA,EAAuB,CAAC,EAE5FE,EAAS,KAAK,IAAI,KAAK,IAAI/B,EAAM,OAAQ8B,CAAQ,EAAGA,EAAW,EAAE,EAEvE,KAAK,OAAS,KAAK,IAAI,KAAK,IAAI,KAAK,OAAUC,EAAS,KAAK,kBAAmB,KAAK,SAAS,EAAG,KAAK,SAAS,EAE/G,MAAMrB,EAAoB,KAAK,sBAAsB,KAAK,oBAAoB,KAAK,MAAM,CAAC,EACpFsB,GAAoBzB,GAAAC,EAAA,KAAK,gBAAgBE,KAArB,YAAAF,EAAyC,QAAzC,KAAAD,EAAkD,KAE5E,KAAK,cAAgBG,EACjB,KAAK,gBAAkBsB,GACzB,KAAK,MAAM,oBAAqB,KAAK,cAAgBA,CAAiB,EAGxE,KAAK,aAAa,IAAM,CACtB,KAAK,WAAW,KAAK,oBAAoB,KAAK,MAAO,CAAC,CAAA,CACvD,CACH,EACA,aAAc9C,EAAU+C,GAAwB,CACtCA,KACP,GAAG,EACN,QAAQjC,EAAgC,CAClCA,EAAM,YACRA,EAAM,eAAe,EAGvB,KAAM,CAAE,QAAAkC,CAAA,EAAYjC,EAAWD,CAAK,EACpC,KAAK,MAAQ,CAAC,KAAK,OAASkC,CAAO,EAC9BnC,EAAaC,CAAK,IACrB,KAAK,YAAc,IAErB,KAAK,WAAa,EACpB,EACA,OAAOA,EAAgC,CAIjC,GAHAA,EAAM,YACRA,EAAM,eAAe,EAEnB,CAAC,KAAK,MACR,OAEF,KAAM,CAAE,QAAAkC,CAAA,EAAYjC,EAAWD,CAAK,EAC9B4B,EAAOM,EAAU,KAAK,MAAM,GAC9B,KAAK,IAAIN,CAAI,EAAI,MACnB,KAAK,WAAa,IAEf,KAAA,OAAS,KAAK,MAAM,GAAKA,GAAQ7B,EAAaC,CAAK,EAAI,KAAK,iBAAmB,KAAK,gBAC3F,EACA,MAAMA,EAAgC,CAChCA,EAAM,YACRA,EAAM,eAAe,EAEnB,KAAK,WACP,KAAK,WAAW,KAAK,oBAAoB,KAAK,MAAO,CAAC,EAC7C,KAAK,aACd,KAAK,QAAQA,CAAK,EAEpB,KAAK,MAAQ,KACb,KAAK,WAAa,GAClB,KAAK,YAAc,EACrB,EACA,mBAAmBA,EAAmB,QAChCA,EAAM,gBAAkB,QAASQ,EAAAR,EAAM,gBAAN,YAAAQ,EAAiC,YAAa,SACjF,KAAK,SAASR,CAAK,CAEvB,EACA,SAASA,EAAgC,CACnCA,EAAM,YACRA,EAAM,eAAe,EAElB,KAAA,WAAW,KAAK,aAAa,EAClC,KAAK,MAAQ,KACb,KAAK,YAAc,GACnB,KAAK,WAAa,EACpB,EACA,QAAQA,EAAgC,CAChC,MAAAmC,EAAY,KAAK,MAAM,SACvBC,EAAe,KAAK,MAAM,YAC1BC,EAAYpC,EAAWD,CAAK,EAC5BsC,EAAID,EAAU,QACdE,EAAIF,EAAU,QACdG,EAAUL,EAAU,wBACpBM,EAAaL,EAAa,wBAE5BI,EAAQ,MAAQF,GAAKA,GAAKE,EAAQ,OAASA,EAAQ,KAAOD,GAAKA,GAAKC,EAAQ,OACzE,KAAA,WAAW,KAAK,cAAgB,CAAC,EAC7BC,EAAW,MAAQH,GAAKA,GAAKG,EAAW,OAASA,EAAW,KAAOF,GAAKA,GAAKE,EAAW,QAC5F,KAAA,WAAW,KAAK,cAAgB,CAAC,CAE1C,EACA,WAAWnB,EAAe,SAClB,MAAAZ,EAAoB,KAAK,sBAAsBY,CAAK,EACpDU,GAAoBzB,GAAAC,EAAA,KAAK,gBAAgBE,KAArB,YAAAF,EAAyC,QAAzC,KAAAD,EAAkD,KACvE,KAAA,OAAS,KAAK,kBAAkBG,CAAiB,EAEtD,KAAK,cAAgB,GACjB,KAAK,kBACP,aAAa,KAAK,eAAe,EACjC,KAAK,gBAAkB,MAGpB,KAAA,gBAAkB,WAAW,IAAM,CACtC,KAAK,cAAgB,GACrB,KAAK,gBAAkB,KAEvB,KAAK,cAAgBA,EACjB,KAAK,gBAAkBsB,GACzB,KAAK,MAAM,oBAAqB,KAAK,cAAgBA,CAAiB,GAEvE,GAAG,CACR,CACF,EACA,QAAS,CACP,IAAIU,EAAQ,CAAA,EACZ,OAAI,KAAK,eACDA,EAAA,KAAKC,IAAE,MAAO,CAClB,MAAO,CACL,yBACA,qCACA,CACE,kCAAmC,KAAK,gBAAkB,EAC5D,CACF,EACA,IAAM/B,GAAOA,GAAM,KAAK,WAAWA,CAAoB,CAAA,EACtDgC,EAAW,WAAA,KAAK,OAAQ,cAAe,CAAE,KAAM,KAAK,WAAY,EAAG,IAAM,CAC1E,KAAK,WACN,CAAA,CAAC,CAAC,EACM,KAAK,gBAAgB,SAAW,GACnCF,EAAA,KAAKC,IAAE,MAAO,CAClB,MAAO,CACL,yBACA,+BACA,iCACF,EACA,IAAM/B,GAAOA,GAAM,KAAK,WAAWA,CAAoB,CAAA,EACtDgC,EAAW,WAAA,KAAK,OAAQ,QAAS,CAAE,KAAM,KAAK,KAAM,EAAG,IAAM,CAC9D,KAAK,KACN,CAAA,CAAC,CAAC,EAGLF,EAAQA,EAAM,OAAO,KAAK,gBAAgB,IAAI,CAAC5C,EAAQwB,IAC9CqB,EAAAA,EAAE,MAAO,CACd,MAAO,CACL,yBACA,CACE,kCAAmC,KAAK,gBAAkBrB,CAC5D,CACF,EACA,IAAKxB,EAAO,MACZ,IAAMc,GAAOA,GAAM,KAAK,WAAWA,CAAoB,CAAA,EACtDgC,EAAAA,WAAW,KAAK,OAAQ,UAAW,CAAE,OAAA9C,CAAA,EAAU,IAAM,CACtDA,EAAO,IACR,CAAA,CAAC,CACH,CAAC,EACK6C,EAAAA,EAAE,MAAO,CACd,MAAO,CACL,mBACF,CAAA,EACC,CACDA,EAAAA,EAAE,MAAO,CACP,IAAK,UACL,MAAO,CACL,4BACA,CACE,uCAAwC,KAAK,aAC/C,CACF,EACA,MAAO,OAAO,KAAK,QAAW,SAAW,CAAE,IAAK,GAAG,KAAK,UAAW,EAAI,CAAC,GACvED,CAAK,EACRC,EAAAA,EAAE,MAAO,CAAE,MAAO,CAAC,yBAAyB,GAAK,CAC/CA,EAAA,EAAE,MAAO,CAAE,MAAO,CAAC,6BAA6B,EAAG,IAAK,WAAY,EACpEA,EAAA,EAAE,MAAO,CAAE,MAAO,CAAC,mCAAmC,EAAG,IAAK,iBAAkB,EAChFA,EAAA,EAAE,MAAO,CAAE,MAAO,CAAC,gCAAgC,EAAG,IAAK,cAAe,CAAA,CAC3E,CAAA,CACF,CACH,CACF,CAAC,ECjcM,SAASE,EAAQC,EAAU,CAC5BA,EAAA,UAAU,kBAAmB5C,CAAe,CAClD,CAEI,OAAO,OAAW,KAAgB,OAAe,KACnD2C,EAAS,OAAe,GAAG,EAG7B,MAAME,EAAiB,CACrB,QAAAF,CACF"}